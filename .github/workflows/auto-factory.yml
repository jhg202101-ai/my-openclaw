name: OpenClaw (Gemini) smoke test

on:
  workflow_dispatch:
  push:

jobs:
  openclaw:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "22"

      - name: Install OpenClaw
        run: |
          npm install -g openclaw@latest
          echo "▶ OpenClaw version"
          openclaw --version

      - name: Inspect OpenClaw CLI (no assumptions)
        run: |
          set -e

          echo "▶ openclaw --help"
          echo "----------------------------------------"
          openclaw --help
          echo "----------------------------------------"

          echo ""
          echo "▶ openclaw cron --help (if exists)"
          echo "----------------------------------------"
          openclaw cron --help || true
          echo "----------------------------------------"

          echo ""
          echo "▶ openclaw config --help (if exists)"
          echo "----------------------------------------"
          openclaw config --help || true
          echo "----------------------------------------"

          echo ""
          echo "▶ openclaw agent --help (if exists)"
          echo "----------------------------------------"
          openclaw agent --help || true
          echo "----------------------------------------"

          echo ""
          echo "▶ CLI inspection finished"
